<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Schedule - Smart Tourism Assistant</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
  <style>
    .gradient-bg { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
    .card-hover { transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .card-hover:hover { transform: translateY(-5px); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1), 0 10px 10px -5px rgba(0,0,0,0.04); }
    .time-slot { border-left: 4px solid #10b981; }
    .time-slot.confirmed { border-left-color: #10b981; }
    .time-slot.pending { border-left-color: #f59e0b; }
    .time-slot.completed { border-left-color: #6b7280; }
    .selected-day { background-color: #10b981; color: white; }
    .today { border: 2px solid #3b82f6; border-radius: 0.375rem; }
    .other-month-day { color: #cbd5e1; }
  </style>
</head>
<body class="bg-gray-50">

  <!-- Navigation -->
  <nav class="bg-white shadow-lg fixed w-full top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center">
          <i class="fas fa-compass text-2xl text-green-600 mr-2"></i>
          <span class="text-xl font-bold text-gray-800">Smart Tourism Assistant</span>
        </div>
        <div class="hidden md:block">
          <div class="ml-10 flex items-baseline space-x-4">
            <a href="guide-dashboard.html" class="text-gray-500 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium">Dashboard</a>
            <a href="guide-schedule.html" class="text-green-600 px-3 py-2 rounded-md text-sm font-medium">Schedule</a>
            <a href="guide-tourists.html" class="text-gray-500 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium">Tourists</a>
            <a href="guide-chat.html" class="text-gray-500 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium">Chat</a>
            <button onclick="logoutUser()" class="text-red-600 block px-3 py-2 rounded-md text-base font-medium">
    Logout
</button>
          </div>
        </div>
        <div class="md:hidden">
          <button id="mobile-menu-button" class="text-gray-500 hover:text-gray-600 focus:outline-none focus:text-gray-600">
            <i class="fas fa-bars text-xl"></i>
          </button>
        </div>
      </div>
    </div>
    <div id="mobile-menu" class="md:hidden hidden bg-white border-t">
      <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
        <a href="guide-dashboard.html" class="text-gray-500 block px-3 py-2 rounded-md text-base font-medium">Dashboard</a>
        <a href="guide-schedule.html" class="text-green-600 block px-3 py-2 rounded-md text-base font-medium">Schedule</a>
        <a href="guide-tourists.html" class="text-gray-500 block px-3 py-2 rounded-md text-base font-medium">Tourists</a>
        <a href="guide-chat.html" class="text-gray-500 block px-3 py-2 rounded-md text-base font-medium">Chat</a>
        <button onclick="logoutUser()" class="text-red-600 block px-3 py-2 rounded-md text-base font-medium">
    Logout
</button>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="pt-16">
    <section class="gradient-bg py-12">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center">
          <h1 class="text-3xl md:text-4xl font-bold text-white mb-4">Your Schedule</h1>
          <p class="text-xl text-green-100 mb-6">Manage your tours and bookings</p>
        </div>
      </div>
    </section>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

      <!-- Calendar -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-8">
        <div class="flex items-center justify-between mb-6">
          <h3 id="calendar-title" class="text-xl font-semibold text-gray-800"></h3>
          <div class="flex space-x-2">
            <button id="prev-month" class="p-2 hover:bg-gray-100 rounded-md"><i class="fas fa-chevron-left"></i></button>
            <button id="next-month" class="p-2 hover:bg-gray-100 rounded-md"><i class="fas fa-chevron-right"></i></button>
          </div>
        </div>
        <div class="grid grid-cols-7 gap-2 text-center font-medium text-gray-500">
          <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
        </div>
        <div id="calendar-days" class="grid grid-cols-7 gap-2 mt-2 text-center"></div>
      </div>

      <!-- Today's Schedule -->
      <div class="bg-white rounded-lg shadow-md p-6 mb-8" id="today-schedule">
        <h3 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
          <i class="fas fa-calendar-day text-green-600 mr-2"></i>
          Today's Schedule
        </h3>
        <div class="space-y-4"></div>
      </div>

      <!-- Upcoming Tours Table (Dynamic) -->
      <div class="bg-white rounded-lg shadow-md p-6">
        <h3 class="text-xl font-semibold text-gray-800 mb-6 flex items-center">
          <i class="fas fa-calendar-alt text-blue-600 mr-2"></i>
          Upcoming Tours
        </h3>
        <div class="overflow-x-auto">
          <table class="w-full" id="upcoming-tours-table">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Time</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tour</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Tourist</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Duration</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
              </tr>
            </thead>
            <tbody class="bg-white divide-y divide-gray-200" id="upcoming-tours-body"></tbody>
          </table>
        </div>
      </div>

    </div>
  </div>

  <script>
    // Mobile menu toggle
    document.getElementById("mobile-menu-button").addEventListener("click", () => {
      document.getElementById("mobile-menu").classList.toggle("hidden");
    });

    const calendarTitle = document.getElementById("calendar-title");
    const calendarDays = document.getElementById("calendar-days");
    const todayScheduleContainer = document.getElementById("today-schedule").querySelector(".space-y-4");
    const todayScheduleHeader = document.getElementById("today-schedule").querySelector("h3");

    let currentMonth = new Date().getMonth();
    let currentYear = 2025;
    let selectedDate = new Date();
    let selectedDayDiv = null;

    // Sample tour events
    const tourEvents = [
      { date: "2025-10-25", time: "9:00 AM", duration: "2 hours", tour: "Red Fort Heritage Tour", tourists: "Sarah Johnson (2 people)", contact: "+91 98765 43210", status: "Confirmed" },
      { date: "2025-10-25", time: "2:00 PM", duration: "3 hours", tour: "Old Delhi Food Walk", tourists: "Mike Chen (4 people)", contact: "+91 98765 43211", status: "Pending" },
      { date: "2025-12-25", time: "9:00 AM", duration: "4 hours", tour: "Christmas Special Tour", tourists: "John Smith (4 people)", contact: "+91 98765 43212", status: "Confirmed" },
      { date: "2025-10-28", time: "11:00 AM", duration: "2 hours", tour: "Lotus Temple Visit", tourists: "Alice Lee (3 people)", contact: "+91 98765 43213", status: "Confirmed" }
    ];

    function renderCalendar(month, year){
      const monthNames = ["January","February","March","April","May","June","July","August","September","October","November","December"];
      calendarTitle.textContent = `${monthNames[month]} ${year}`;
      calendarDays.innerHTML = "";

      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month+1, 0).getDate();
      const prevMonthDays = new Date(year, month, 0).getDate();
      const today = new Date();

      for(let i=firstDay-1;i>=0;i--){
        const div = document.createElement("div");
        div.textContent = prevMonthDays-i;
        div.className="p-2 text-sm other-month-day";
        calendarDays.appendChild(div);
      }

      for(let day=1;day<=daysInMonth;day++){
        const div = document.createElement("div");
        div.textContent=day;
        div.className="p-2 text-sm text-gray-700 rounded-md hover:bg-green-100 cursor-pointer";

        if(selectedDate.getDate()===day && selectedDate.getMonth()===month && selectedDate.getFullYear()===year){
          div.classList.add("selected-day");
          selectedDayDiv=div;
        }

        if(today.getDate()===day && today.getMonth()===month && today.getFullYear()===year){
          div.classList.add("today");
        }

        div.addEventListener("click",()=>{
          selectedDate=new Date(year,month,day);
          updateTodaySchedule(selectedDate);
          if(selectedDayDiv) selectedDayDiv.classList.remove("selected-day");
          div.classList.add("selected-day");
          selectedDayDiv=div;
        });

        calendarDays.appendChild(div);
      }

      const totalCells=calendarDays.children.length;
      const nextMonthDays=(7-(totalCells%7))%7;
      for(let i=1;i<=nextMonthDays;i++){
        const div=document.createElement("div");
        div.textContent=i;
        div.className="p-2 text-sm other-month-day";
        calendarDays.appendChild(div);
      }
    }

    function updateTodaySchedule(dateObj){
      const monthNames = ["January","February","March","April","May","June","July","August","September","October","November","December"];
      const formattedDate = `${dateObj.getFullYear()}-${String(dateObj.getMonth()+1).padStart(2,'0')}-${String(dateObj.getDate()).padStart(2,'0')}`;
      todayScheduleHeader.innerHTML=`<i class="fas fa-calendar-day text-green-600 mr-2"></i>Today's Schedule - ${monthNames[dateObj.getMonth()]} ${dateObj.getDate()}, ${dateObj.getFullYear()}`;
      let events = tourEvents.filter(ev=>ev.date===formattedDate);
      todayScheduleContainer.innerHTML="";
      if(events.length===0){
        events=[
          { time:"9:00 AM", duration:"2 hours", tour:"Red Fort Heritage Tour", tourists:"Sarah Johnson (2 people)", contact:"+91 98765 43210", status:"Confirmed" },
          { time:"11:00 AM", duration:"3 hours", tour:"Lotus Temple Visit", tourists:"Alice Lee (3 people)", contact:"+91 98765 43213", status:"Confirmed" },
          { time:"2:00 PM", duration:"3 hours", tour:"Old Delhi Food Walk", tourists:"Mike Chen (4 people)", contact:"+91 98765 43211", status:"Pending" },
          { time:"4:00 PM", duration:"1 hour", tour:"India Gate Evening Tour", tourists:"Emma Watson (2 people)", contact:"+91 98765 43214", status:"Confirmed" }
        ];
      }
      events.forEach(ev=>{
        const slot = document.createElement("div");
        slot.className=`time-slot ${ev.status.toLowerCase()} p-4 bg-${ev.status==='Confirmed'?'green':'yellow'}-50 rounded-lg`;
        slot.innerHTML=`
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
              <div class="text-center">
                <div class="text-lg font-semibold text-gray-800">${ev.time}</div>
                <div class="text-sm text-gray-600">${ev.duration}</div>
              </div>
              <div>
                <h4 class="font-semibold text-gray-800">${ev.tour}</h4>
                <p class="text-sm text-gray-600">${ev.tourists}</p>
                <p class="text-sm text-gray-500">Contact: ${ev.contact}</p>
              </div>
            </div>
            <div class="flex items-center space-x-2">
              <span class="px-3 py-1 bg-${ev.status==='Confirmed'?'green':'yellow'}-100 text-${ev.status==='Confirmed'?'green':'yellow'}-800 text-sm rounded-full">${ev.status}</span>
              <button class="p-2 text-green-600 hover:text-green-800"><i class="fas fa-phone"></i></button>
              <button class="p-2 text-blue-600 hover:text-blue-800"><i class="fas fa-map-marker-alt"></i></button>
            </div>
          </div>
        `;
        todayScheduleContainer.appendChild(slot);
      });
    }

    document.getElementById("prev-month").addEventListener("click",()=>{
      currentMonth--;
      if(currentMonth<0){ currentMonth=11; currentYear--; }
      renderCalendar(currentMonth,currentYear);
    });
    document.getElementById("next-month").addEventListener("click",()=>{
      currentMonth++;
      if(currentMonth>11){ currentMonth=0; currentYear++; }
      renderCalendar(currentMonth,currentYear);
    });

    // Render calendar & today's schedule
    renderCalendar(currentMonth,currentYear);
    updateTodaySchedule(selectedDate);

    // Upcoming Tours Table
    function renderUpcomingTours() {
      const tbody = document.getElementById("upcoming-tours-body");
      tbody.innerHTML = "";
      const today = new Date();
      const futureTours = tourEvents.filter(ev => new Date(ev.date) >= today);
      futureTours.sort((a, b) => new Date(a.date + " " + a.time) - new Date(b.date + " " + b.time));
      if (futureTours.length === 0) {
        tbody.innerHTML = `<tr><td colspan="7" class="px-6 py-4 text-center text-gray-500">No upcoming tours.</td></tr>`;
        return;
      }
      futureTours.forEach(ev => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td class="px-6 py-4 text-sm text-gray-900">${new Date(ev.date).toLocaleDateString('en-US', { month:'short', day:'numeric' })}</td>
          <td class="px-6 py-4 text-sm text-gray-900">${ev.time}</td>
          <td class="px-6 py-4 text-sm text-gray-900">${ev.tour}</td>
          <td class="px-6 py-4 text-sm text-gray-900">${ev.tourists}</td>
          <td class="px-6 py-4 text-sm text-gray-900">${ev.duration}</td>
          <td class="px-6 py-4">
            <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${ev.status==='Confirmed' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">${ev.status}</span>
          </td>
          <td class="px-6 py-4 text-sm font-medium">
            <button class="text-blue-600 hover:text-blue-900 mr-3">View</button>
            <button class="text-green-600 hover:text-green-900">Contact</button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }

    renderUpcomingTours();
    function logoutUser() {
    localStorage.removeItem("tourist_user");
    localStorage.removeItem("auth_token");
    window.location.href = "guide-login.html";
}
  </script>
</body>
</html>